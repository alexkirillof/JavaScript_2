(()=>{const t="http://localhost:8000/api",e=(t,e,o)=>new Promise((i=>{const n=new XMLHttpRequest;n.open(t,e,!0),o&&n.setRequestHeader("Content-type","application/json"),n.send(o),n.onload=t=>{i(JSON.parse(t.target.response))}}));Vue.component("basket-goods-item",{props:["item"],data:function(){return{style:{padding:"30px 15px",display:"grid",gridTemplateColumns:"min-content 1fr min-content"}}},template:'\n    <div class="basket-goods-item" :style="style">  \n     <div>{{item.title}}</div>\n     <img src=item.img alt={{item.img}}>\n     <div>{{item.price}}</div>\n     <custom-button  @click="$emit(\'del\')">Удалить</custom-button>\n    </div>'}),Vue.component("basket-card",{data:function(){return{styles:{root:{display:"grid",gridTemplateRows:"min-content 1fr min-content"},header:{padding:"20px",background:"lightgray"},footer:{padding:"20px",background:"grey"}}}},template:'\n        <div class="basket-card" :style="styles.root" >\n         <div :style="styles.header">\n         <slot name="header"></slot>\n         </div>\n         <div>\n         <slot></slot>\n         </div>\n         <div :style="styles.footer">\n         <slot name="footer"></slot>\n         </div>\n    </div>\n  '}),Vue.component("custom-button",{data:function(){return{style:{border:"1px solid grey",padding:"6px",borderRadius:"5px",cursor:"pointer"}}},template:'\n      <button :style="style" @click="$emit(\'open\')">\n      <slot></slot>\n      </button>\n    '}),Vue.component("close-button",{data:function(){return{style:{position:"absolute",fontWeight:"700",fontSize:"15px",lineHeight:"15px",opacity:"0.6",cursor:"pointer",top:"19px",right:"19px"}}},template:'    \n      <span :style="style" @click="$emit(\'close\')">✖</span>\n    '}),Vue.component("goods-item",{props:["item"],template:'\n    <div class="goods-item">  \n     <div>{{item.title}}</div>\n     <img :src="item.img" alt="">\n     <div>{{item.price}}</div>\n     <custom-button @click="$emit(\'click\', item)">Добавить</custom-button>\n    </div>'}),new Vue({el:"#app",data:{goods:[],filteredGoods:[],basketGoods:[],basketCardVision:!1,search:"",classes:["body","border"]},mounted:function(){e("GET","http://localhost:8000/goods.json").then((t=>{this.goods=t,this.filteredGoods=t})),e("GET","http://localhost:8000/basket-goods.json ").then((t=>{this.basketGoods=t}))},methods:{filterGoods:function(){this.filteredGoods=this.goods.filter((({title:t})=>new RegExp(this.search,"i").test(t)))},openCart:function(){this.basketCardVision=!0},closeCart:function(){this.basketCardVision=!1},addGood:function({title:o,price:i,img:n,id:s}){e("PATCH",t,JSON.stringify({id:s,title:o,img:n,price:i})).then((t=>{this.basketGoods=t}))},delGood:function({title:o,price:i,img:n,id:s}){e("PATCH",t,JSON.stringify({id:s,title:o,img:n,price:i})).then((t=>{this.basketGoods=t}))}}})})();